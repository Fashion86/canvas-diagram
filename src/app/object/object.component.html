<app-header></app-header>
<div class="container">
  <h3>Objects ({{objects?.length}})</h3>
  <div class="add-data">
    <button type="button" class="btn btn-primary btn-md btn-right" (click)="onCreate()">Add New Object</button>
    <div *ngIf="objects?.length>0" class="searchbar input-group col-sm-4">
      <input class="form-control" type="text" placeholder="Filter by Object Name ..." (keydown)="searchObject($event)" [(ngModel)]="searchstr">
      <span class="input-group-addon"><i class="fa fa-search"></i></span>
    </div>
  </div>
  <div class="table-group table-responsive table-bordered">
    <table id="reports-table" class="table table-hover table-striped">
      <thead>
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th>Attributes</th>
        <th colspan="2">Options</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let object of objects; let i = index">
        <td>
          {{object.name}}
        </td>
        <td>
          {{object.value}}
        </td>
        <td>
          <a (click)="goAttributes(object)">View Attributes</a>
        </td>
        <td>
          <a (click)="editData(object)">
            <i class="fa fa-pencil"></i>
          </a>
        </td>
        <td>
          <a style="color: red" (click)="deleteData(object, i)">
            <i class="fa fa-trash-o"></i>
          </a>
        </td>
      </tr>
      </tbody>
    </table>
    <div class="pagination-wrapper">
      <!--<p-paginator [rows]="20" [totalRecords]="totalRecords" pageLinkSize="3" (onPageChange)="paginate($event)"></p-paginator>-->
    </div>
  </div>
</div>

<!-- edit dialog-->
<ngx-smart-modal #editModal identifier="editModal" [dismissable]="false">
  <div class="dg-heaser">
    <h3>
      <span *ngIf="editObject.id">Edit Object</span>
      <span *ngIf="!editObject.id">Create Object</span>
    </h3>
  </div>
  <div class="dg-body">
    <form class="form-horizontal" #form="ngForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label class="control-label col-sm-3">Name</label>
        <div class="col-sm-9 right-div">
          <input type="text" class="form-control" [(ngModel)]="editObject.name" placeholder="Name" name="name" required>
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-3">Value</label>
        <div class="col-sm-9 right-div">
          <input type="text" class="form-control" [(ngModel)]="editObject.value" placeholder="Value" name="value" required>
        </div>
      </div>
      <div class="form-group">
        <div class="control-btn">
          <button *ngIf="editObject.id;" type="submit" class="btn btn-primary btn-md btn-right"
                  [disabled]="form.form.invalid">Update
          </button>
          <button *ngIf="!editObject.id;" type="submit" class="btn btn-primary btn-md btn-right"
                  [disabled]="form.form.invalid">Create
          </button>
          <button type="button" class="btn btn-default btn-md btn-right" (click)="editModal.close()">Cancel</button>
        </div>
      </div>
    </form>
  </div>
</ngx-smart-modal>

<!-- delete dialog-->
<ngx-smart-modal #deleteModal identifier="deleteModal" [dismissable]="false">
  <div class="dg-heaser">
    <h3>
      <span>Confirmation</span>
    </h3>
  </div>
  <div class="dg-body">
    <h4><i class="fa fa-warning"></i> Are you sure delete this Object?</h4>
  </div>
  <div class="form-group">
    <div class="control-btn">
      <button type="button" class="btn btn-success btn-md btn-right" (click)="onDelete()">Yes
      </button>
      <button type="button" class="btn btn-primary btn-md btn-right" (click)="deleteModal.close()">No</button>
    </div>
  </div>
</ngx-smart-modal>